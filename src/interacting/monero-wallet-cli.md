---
# Кошелёк Monero CLI
---

## Обзор

### Кошелёк с поддержкой командной строки

«Официальный» кошелёк Monero с поддержкой командной строки. Доступны версии для Linux, MacOS и Windows.

Кошелёк использует приватные ключи, благодаря которым вы можете узнать свой общий баланс, историю транзакций. Также эти ключи облегчают проведение транзакций.

Тем не менее кошелёк не хранит копию блокчейна и не участвует напрямую в p2p сети.

CLI-кошелёк является самым надёжным и полным с точки зрения имеющихся функций кошельком Monero.

### Зависимость от полного узла

Кошелёк подключается к [полному узлу](https://wiki.xmr.ru/interacting/monerod.html), чтобы просканировать выходы ваших транзакций, а также отправить ваши транзакции в сеть.

Полный узел может быть как локальным (тот же компьютер), так и удалённым.

Как правило, полный узел запускается на том же компьютере, на который установлен кошелёк (или в пределах вашей домашней сети).

Соединение происходит через HTTP и использует этот [API](https://www.getmonero.org/resources/developer-guides/wallet-rpc.html).

Любая транзакция, покидающая кошелёк, уже защищена всеми функциями обеспечения анонимности Monero.
Это означает, что передача данных простым текстом через HTTP сама по себе не является проблемой, даже если вы подсоединяетесь к удалённому узлу.

Тем не менее подсоединение к удалённому узлу связано с другими нюансами и компромиссами, которые являются темой отдельной статьи.

## Синтаксис

`./monero-wallet-cli [options] [command]`

Пример:

`./monero-wallet-cli --stagenet`

## Запуск

Перейдите в директорию, в которую были распакованы файлы Monero.

Запустите полный узел и подождите, пока он не синхронизируется с сетью (это может занять до нескольких дней):

`./monerod --stagenet`

Запустите кошелёк в отдельном окне:

`./monero-wallet-cli --stagenet --generate-new-wallet MoneroExampleStagenetWallet`

## Опции

#### Помощь и версия

| Опция               | Описание
|---------------------|--------------------------------------------------------------------------------------------------------------------------------------
| `--help`            | Выводит список доступных опций.
| `--version`         | Показывает версию `monero-wallet-cli` в stdout. Пример: <br />`Monero 'Boron Butterfly' (v0.14.0.0-release)`

#### Выбор сети

| Опция            | Описание
|------------------|------------------------------------------------------------------------------------------------
| (отсутствует)    | По умолчанию кошелёк выбирает [основную сеть](https://wiki.xmr.ru/infrastructure/networks/networks.html#%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D0%B0%D1%8F-%D1%81%D0%B5%D1%82%D1%8C-mainnet).
| `--stagenet`     | Запускает кошелёк в [отладочной сети](https://wiki.xmr.ru/infrastructure/networks/networks.html#%D0%9E%D1%82%D0%BB%D0%B0%D0%B4%D0%BE%D1%87%D0%BD%D0%B0%D1%8F-%D1%81%D0%B5%D1%82%D1%8C-stagenet). Следует помнить, что демон также запускается в `--stagenet`.
| `--testnet`      | Запускает кошелёк в [тестовой сети](https://wiki.xmr.ru/infrastructure/networks/networks.html#%D0%A2%D0%B5%D1%81%D1%82%D0%BE%D0%B2%D0%B0%D1%8F-%D1%81%D0%B5%D1%82%D1%8C-testnet). Следует помнить, что демон также запускается в `--testnet`.

#### Журнал регистрации

| Опция                       | Описание
|-----------------------------|----------------------------------------------------------------------------------------------------------------------------------------
| `--log-file <arg>`          | Полный путь к файлу журнала.
| `--log-level <arg>`         | От `0` до `4`, где `0` обозначает минимальную регистрацию данных в журнале, а `4` запись всех регистрационных данных. По умолчанию имеет значение `0`. Это общие предварительные настройки, которые не связаны напрямую с уровнями сложности. Например, при минимальном значении `0`, можно увидеть только некоторые важные данные `INFO`.
| `--max-log-file-size <arg>` | Запрограммированный и выраженный в байтах размер для регистрационного файла (по умолчанию равен 104850000, что составляет менее 100 Мб). Как только размер регистрационного файла вырастет сверх этого размера, Monero создаст следующий регистрационный файл с постфиксной временной меткой в формате `-YYYY-MM-DD-HH-MM-SS`.<br /><br />В реальных условиях, вы скорее всего предпочтёте использовать проверенные решения, такие как `logrotate`. В этом случае вам следует установить флаг `--max-log-file-size 0`, чтобы запретить возможность управлять файлами журнала.
| `--max-log-files <arg>`     | Предельное количество регистрационных файлов (50 по умолчанию). Старые файлы журнала удаляются автоматически. Вероятно, что вместо этого параметра вы предпочтёте использовать проверенные решения, такие как `logrotate`.

#### Соединение с полным узлом

При совершении всех нелокальных операций кошелёк зависит от полного узла. Следующие опции определяют, как подсоединиться к [`monerod`](https://wiki.xmr.ru/interacting/monerod.html):

| Опция                    | Описание
|--------------------------|--------------------------------------------------------------------------------------------------------------------------------------
| `--daemon-address <arg>` | Использовать `monerod` на адресе `<host>:<port>`. Пример: <br />`./monero-wallet-cli --daemon-address monero-stagenet.exan.tech:38081 --stagenet`
| `--daemon-host <arg>`    | Использовать `monerod` на хосте `<arg>`, а не на локальном хосте (localhost).
| `--daemon-port <arg>`    | Использовать `monerod` на порте `<arg>`, вместо 18081.
| `--daemon-login <arg>`   | Указать `username[:password]` для `monerod` RPC API. Опция основана на схеме базовой аутентификации HTTP. Следует помнить о том, что соединения являются незашифрованными по умолчанию. Аутентификация имеет смысл только в том случае, если вы создаёте безопасное соединение (возможно, посредством Tor, SSH туннеля или обратного прокси-сервера с TLS).
| `--trusted-daemon`       | Позволяет использовать команды и типы поведения, рассчитанные на доверенный `monerod`. Используется по умолчанию для соединения localhost. Доверие в этом контексте является вопросом вашей анонимности. Этот флаг можно использовать только в том случае, если вы контролируете `monerod`. Доверенный демон позволяет использовать такие команды, как `rescan_spent`, `start_mining`, `import_key_images`, и типы поведения **не** такие, как предупреждение о возможной атаке по средствам отправки транзакций.
| `--untrusted-daemon`     | Отключает команды и типы поведения, рассчитанные на доверенный `monerod`.  Используется по умолчанию для соединений не с локальным хостом. См. подробную информацию в пункте `--trusted-daemon`.
| `--do-not-relay`         | Только что созданная транзакция не будет передана в сеть Monero. Вместо этого она будет сброшена в файл в необработанном шестнадцатеричном формате. Опция полезна в том случае, если вы желаете пропустить транзакцию через такой шлюз, как [https://xmrchain.net/rawtx](https://xmrchain.net/rawtx). Её проще использовать с Tor, а не кошельком Monero.
| `--allow-mismatched-daemon-version` | Позволяет связываться с `monerod`, использующим другую версию RPC.

#### Создание нового кошелька

| Опция                          | Описание
|--------------------------------|--------------------------------------------------------------------------------------------------------------------------------------
| `--generate-new-wallet <arg>`  | Создание нового кошелька Monero и его сохранение в файл `<arg>`. Предварительно у вас попросят задать пароль. Пароль используется для шифрования файла кошелька, но он не связан с вашим главным ключом траты или мнемонической фразой. Следует создать очень сложный пароль, воспользовавшись вашим менеджером паролей (энтропия должна составлять ~256 бит). Пример:<br /><br />`./monero-wallet-cli --stagenet --generate-new-wallet $HOME/.bitmonero/stagenet/wallets/MoneroExampleStagenetWallet`
| `--kdf-rounds <arg>`           | CКасается шифрования файла кошелька. Файл кошелька шифруется при помощи поточного шифра ChaCha. Ключ шифрования выводится на основе предоставленного пользователем пароля путём хеширования этого пароля при помощи. Эта опция определяет, сколько раз будет использовано хеширование CryptoNight. По умолчанию хеширование происходит `1` раз. <br /><br />Следует отметить, что это **не связано** с генерированием ключа траты. <br /><br />Чем больше раз будет производиться хеширование, тем больше времени вы будете ждать открытия кошелька или проведения транзакции. Но при этом злоумышленнику будет сложнее подобрать пароль к вашему кошельку методом перебора. <br /><br />**Примечание:** Вам будет необходимо запомнить и вводить одни и те же `kdf-rounds` при каждом получении доступа к вашему кошельку!<br /><br />**Рекомендация:** Не меняйте значения используемые по умолчанию. Вместо этого генерируйте очень сложный пароль, воспользовавшись вашим менеджером паролей (энтропия должна составлять 256 бит).

#### Открытие существующего кошелька

| Опция                       | Описание
|-----------------------------|--------------------------------------------------------------------------------------------------------------------------------------
| `--wallet-file <arg>`       | Открывает существующий кошелёк. Пример: <br/><br/>`./monero-wallet-cli --stagenet --wallet-file $HOME/.bitmonero/stagenet/wallets/MoneroExampleStagenetWallet` <br /><br/>Применяется только к файлам кошелька, созданного при помощи инструментов `monero-wallet-cli`, `monero-wallet-gui` или `monero-wallet-rpc`. Если вы используете другой тип кошелька, то вам необходимо ознакомиться с опциями переноса.
| `--password <arg>`          | Позволяет использовать пароль в качестве параметра, а не интерактивно. Не забывайте использовать пробелы / кавычки при такой необходимости. <br /><br />**Не рекомендуется** использовать эту опцию, так как пароль останется в вашей истории команд, а также будет виден в таблице процессов. В целях автоматизации лучше использовать опцию `--password-file`. <br /><br />Опция также работает в сочетании с `--generate-new-wallet`.
| `--password-file <arg>`     | Позволяет использовать пароль в качестве файла, а не интерактивно. Конечные `\n` отбрасываются при считывании файла пароля. <br /><br />Если вы автоматизируете доступ к кошельку, то лучше использовать эту опцию, а не `--password`. Следует убедиться в том, что файл пароля надёжно отделён от файла кошелька. В противном случае опция не даст никаких преимуществ с точки зрения безопасности. <br /><br />Опция также работает в сочетании с `--generate-new-wallet`.

#### Восстановление кошелька

| Опция                            | Описание
|----------------------------------|--------------------------------------------------------------------------------------------------------------------------------------
| `--generate-from-device <arg>`   | Восстановление/создание специального кошелька для **аппаратного устройства**, такого как [Ledger](https://www.ledger.com/) или [Trezor](https://trezor.io/), и его сохранения в файле `<arg>`. Например: <br /><br />`./monero-wallet-cli --stagenet --generate-from-device MoneroExampleDeviceWallet --subaddress-lookahead 5:20` <br /><br />Это одноразовое действие. В следующий раз просто [откроете кошелёк](#open-existing-wallet).<br /><br />По умолчанию команда ожидает подсоединения устройства Ledger. В случае использования аппаратного кошелька Trezor - `--hw-device Trezor` (expected ~May 2019).<br /><br />При настройках, используемых по умолчанию, это занимает **до 25 минут**. Причина состоит в том, что аппаратные устройства медленно генерируют подадреса. Во избежание этого следует использовать `--subaddress-lookahead 5:20`. <br /><br />У локального кошелька не будет приватного ключа траты, и он не сможет самостоятельно потратить средства. Он служит пользовательским интерфейсом для аппаратных устройств малой мощности. Подписание транзакций публичным ключом траты всегда происходит на аппаратном устройстве. <br /><br />См. [полное руководство по настройке аппаратного кошелька](https://www.reddit.com/r/Monero/comments/8op6cp/ledger_cli_guides_requires_cli_v01220/).
| `--generate-from-view-key <arg>` | Восстановление версии кошелька, предназначенной только для просмотра, позволяющей отслеживать входящие транзакции, и её сохранение в файле `<arg>`. TКошелёк создаётся на основе **секретного ключа просмотра** и **стандартного адреса**. Секретный ключ просмотра представляется в шестнадцатеричном формате.
| `--generate-from-spend-key <arg>`| Восстановление кошелька на основе **секретного ключа траты** и его сохранение в `<arg>`. Секретный ключ просмотра представляется в шестнадцатеричном формате.
| `--restore-deterministic-wallet` | Восстановление кошелька на основе **секретной мнемонической фразы**. Используется для восстановления кошелька с использованием 25 мнемонических слов. <br /><br />Для шифрования самого файла кошелька (после восстановления) будет запрошен пароль. Мнемонические фразы, генерируемые кошельками Monero, являются **открытыми**.
| `--restore-height <arg>`         | Сканирование на наличие транзакций после определённой высоты блока. Значение, используемое по умолчанию, — `0`. Увеличение этого значения делает восстановление кошелька **гораздо более быстрым**. Оптимальное значение должно соответствовать тому дню, когда был создан кошелёк (не рекомендуется использовать более поздний интервал дат). Соответствие высоты блока дате/времени можно определить при помощи блок-эксплореров, таких как [https://xmrchain.net](https://xmrchain.net/). Если кошелёк был создан, например, в 2019 году или позже, следует использовать высоту блока, равную 1730000.

#### Multisig кошелёк

| Опция                                 | Описание
|---------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------
| `--generate-from-multisig-keys <arg>` | Создание стандартного кошелька на основе multisig ключей. Полезно объединять все секретные multisig ключи в стандартном кошельке (когда у вас более нет необходимости в использовании multisig). После этого кошелёк получает контроль над средствами. Он поддерживает все секретные ключи, даже если схема multisig использует ограничение (только `N/N`, но не `N/M`).
| `--restore-multisig-wallet`           | Восстановление multisig кошелька на основе **секретной мнемонической фразы**. , которая была ранее экспортирована при помощи интерактивной команды `seed`. Эта опция просто восстанавливает вашу часть кошелька. Другим участникам схемы multisig по-прежнему понадобится подписывать транзакции.

#### Конфигурационный файл

| Опция                    | Описание
|--------------------------|--------------------------------------------------------------------------------------------------------------------------------------
| `--config-file <arg>`    | Указывает полный путь к [конфигурационному файлу](https://wiki.xmr.ru/interacting/monero-config-file.html). Следует отметить, что это должен быть отдельный конфигурационный файл, используемый `monerod`, поскольку эти инструменты принимают различные наборы опций.

#### Рабочие параметры

| Опция                          | Описание
|--------------------------------|--------------------------------------------------------------------------------------------------------------------------------------
| `--subaddress-lookahead <arg>` | Устанавливает значения `m:n` (по умолчанию `50:200`). Первое значение указывает количество счетов, а второе — количество подадресов на счёт. <br /><br />Кошелёк не проверяет платежи, приходящие на подадреса, сверх значения `n`, начиная с последнего полученного платежа. Это может произойти, если вы создали уникальные подадреса для `n` клиентов, но ни на один из них не поступил платёж. <br /><br >С другой стороны, чем больше адресов вы указываете, тем больше времени займёт создание кошелька, поскольку их необходимо предварительно вычислить. Как правило, это не является проблемой, за исключением случаев использования аппаратных кошельков. При использовании Ledger и значении `50:200`, используемом по умолчанию, это может занять 20 минут (только для создания кошелька)!
| `--max-concurrency <arg>`      | Максимальное количество используемых при работе потоков. При значении `0`, заданном по умолчанию, используется общее количество потоков CPU.

#### Интернационализация (Локализация)

| Опция                          | Описание
|--------------------------------|--------------------------------------------------------------------------------------------------------------------------------------
| `--mnemonic-language <arg>`    | Устанавливает язык для слов, входящих в состав мнемонической фразы. Возможен выбор одного из следующих языков: `english`, `english_old`, `esperanto`, `french`, `german`, `italian`, `japanese`, `lojban`, `portuguese`, `russian`, `spanish`. <br /><br />Лучше всего пользовать английский язык, установленный по умолчанию, так как он является самым популярным и проверенным. Также это позволит избежать ошибок, связанных с использованием символов не в формате ASCII.
| `--use-english-language-names` | Если ваш дисплей зависает, выйдите «вслепую», используя ^C, а затем зайдите снова при помощи `--use-english-language-names`. Это может случиться, если Monero предлагает выбрать язык, отображая названия языков и их родных алфавитов.

#### Унаследованные опции

Следующие опции либо являются унаследованными, либо устаревшими.

| Опция                        | Описание
|------------------------------|--------------------------------------------------------------------------------------------------------------------------------------
| `--non-deterministic`        | Генерирует унаследованный не детерминированный кошелёк. Ключ просмотра **не выводится** на основе ключа траты. Также вам придётся создать резервную копию *.keys. Чтобы восстановить не детерминированный кошелёк (стандартный адрес), следует использовать `--generate-from-keys`. Чтобы восстановить всё полностью, понадобится файл *.keys.
| `--generate-from-keys <arg>` | Восстановление унаследованного не детерминированного кошелька путём предоставления ключей траты и просмотра, а также стандартного адреса.
| `--shared-ringdb-dir <arg>`  | Задаёт путь к общей базе данных колец. [Использование опции более нецелесообразно](https://www.reddit.com/r/Monero/comments/9rtnpx/are_there_any_updated_blackball_databases/).
| `--create-address-file`      | Ни на что не влияет. Файл `*.address.txt` создаётся независимо от этой опции.
| `--electrum-seed <arg>`      | Предлагает использовать мнемоническую фразу в качестве опции командной строки для `--restore-deterministic-wallet`, а не интерактивно. Не рекомендуется использовать, поскольку мнемоническая фраза сохранится в истории команд, а также будет видна в таблице процессов.
| `--generate-from-json <arg>` | Для использования этой опции будет необходимо запустить `monero-wallet-rpc`. Кажется, эта опция появилась в `monero-wallet-cli` случайно.
| `--tx-notify <arg>`          | Для использования этой опции будет необходимо запустить `monero-wallet-rpc`. Кажется, эта опция появилась в `monero-wallet-cli` случайно.

## Параметры, установленные по умолчанию

Файлы кошелька создаются и находятся в текущей директории. Едва ли это то, что вам нужно. Для того чтобы изменить ситуацию, следует использовать `--wallet-file` и подобные опции.

Файл журнала создается в той же директории, что и двоичный файл `monero-wallet-cli`. Чтобы указать другое местоположение, следует использовать опцию `--log-file`.

## Команды

Команды вводятся интерактивно в командной строке `monero-wallet-cli`.

Вы также можете использовать одноразовую команду, указав её в качестве параметра командной строки.
Тем не менее этот вариант используется редко. Для автоматизации лучше использовать `monero-wallet-rpc`.

CLI-кошелёк имеет **возможность вывода справки для отдельных команд**.
Мы не станем воспроизводить её. Вместо этого мы сфокусируемся на группировке команд, чтобы вы могли быстро найти именно то, что вам нужно.
Воспользуйтесь `help command_name`, чтобы узнать больше.

### Помощь и версия

`help` - список всех команд

`help command_name` - показать помощь по отдельной команде

`version` - вывод информации о версии двоичного файла monero-wallet-cli

### Баланс

`account` - общий баланс; список счетов с соответствующим балансом

`balance detail` - список адресов для текущего счёта с соответствующим балансом

### Управление счетами

`account`

`account new`

`account switch`

`account label`

### Управление адресами

`address all`

`address new`

`address label`

### Состояние сети

`status` - показывает, синхронизирован ли кошелёк в актуальной высотой блокчейна

`fee` - показывает текущую комиссию за байт и пул памяти полного узла (журнал транзакций в зависимости от приоритета)

`wallet_info` - показывает путь к файлу кошелька, стандартный адрес, тип и сеть

### Секретная мнемоническая фраза

`seed` - показывает необработанную мнемоническую фразу

`encrypted_seed` - создаёт мнемоническую фразу, зашифрованную фразой-паролем; вам придётся запомнить или сохранить фразу-пароль отдельно; без фразы-пароля восстановление будет невозможным

### Секретные ключи

`spendkey` - показывает секретный ключ траты и публичный ключ траты

`viewkey` - показывает секретный ключ просмотра и публичный ключ просмотра

### Доказательства

`get_reserve_proof` -> `check_reserve_proof` - доказательство баланса

`get_spend_proof` -> `check_spend_proof` - доказательство платежа

`sign <file>` -> `verify <filename> <address> <signature>` - доказательство владения адресом; позволяет проверить, был ли файл подписан владельцем определённого адреса Monero

`get_tx_proof` -> `check_tx_proof`

### Multisig

#### Настройка

`prepare_multisig`

`make_multisig`

`finalize_multisig`

#### Обновление

`export_multisig_info`

`import_multisig_info`

#### Прочие

`submit_multisig`

`exchange_multisig_keys`

`export_raw_multisig_tx`

### Приватный ключ транзакции

Эти команды позволяют узнать и верифицировать приватный ключ транзакции `r`.
Он был полезен при создания [доказательства платежа](https://www.getmonero.org/resources/user-guides/prove-payment.html), но был заменён на `get_spend_proof`.

`get_tx_key <txid>`

`check_tx_key <txid> <txkey> <address>`

`set_tx_key <txid> <tx_key>`

### Дополнительные

`unspent_outputs` - показывает список и гистограмму непотраченных выходов (неделимых частей вашего баланса)

`export_key_images <file>` -> `import_key_images <file>` -  используется, чтобы проинформировать кошелёк, предназначенный только для просмотра, о текущих транзакциях, чтобы он мог вычислить реальный баланс; как правило, кошелькам, предназначенным только для просмотра, известно только о входящих транзакциях, но не об исходящих

`export_outputs <file>` - экспортирует набор выходов, которыми владеет данный кошелёк, в `<file>`

### Майнинг

`start_mining`

`stop_mining`

### Пожертвования

`donate <amount>` - пожертвовать `<amount>` команде разработчиков.

### Не имеющие особого значения или унаследованные

`address_book [(add ((<address> [pid <id>])|<integrated address>) [<description possibly with whitespaces>])|(delete <index>)]`

`set_description [free text note]` -> `get_description` - управление описанием кошелька (информация является локальной)

`save` - сейчас это происходит автоматически

`save_bc` - сейчас это происходит автоматически

`bc_height` - показывает высоту блокчейна (заменена на `status`)

`sweep_unmixable` - относится только к очень старым кошелькам (до 2016); отправляет все несмешиваемые выходы вам же при размере кольца, равном `10`

ЧТО ОСТАЛОСЬ: задокументировать остающиеся команды
